{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 [\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Admins can manage all cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "ALL",\
    "qual": "is_admin(auth.uid())",\
    "with_check": "is_admin(auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Cards are viewable by all authenticated users",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "SELECT",\
    "qual": "true",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Public cards are viewable by everyone",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(is_public = true)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can create cards in accessible subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "((creator_id = auth.uid()) AND has_subject_access(auth.uid(), subject_id))"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can delete own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "DELETE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can delete their own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "DELETE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can insert their own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(creator_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can update own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": "(creator_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can update their own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can view accessible cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "((is_public = true) OR (creator_id = auth.uid()) OR has_subject_access(auth.uid(), subject_id) OR is_admin(auth.uid()))",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "cards",\
    "policyname": "Users can view their own cards",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "fsrs_parameters",\
    "policyname": "Admins can update all FSRS parameters",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "is_admin(auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "fsrs_parameters",\
    "policyname": "Admins can view all FSRS parameters",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "is_admin(auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "fsrs_parameters",\
    "policyname": "Debug allow all fsrs",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "ALL",\
    "qual": "true",\
    "with_check": "true"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "fsrs_parameters",\
    "policyname": "Users can update their own FSRS parameters",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(user_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "fsrs_parameters",\
    "policyname": "Users can view their own FSRS parameters",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(user_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "review_history",\
    "policyname": "Admins can view all review history",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "is_admin(auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "review_history",\
    "policyname": "Users can insert their own review history",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(user_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "review_history",\
    "policyname": "Users can insert their own reviews",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(auth.uid() = user_id)"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "review_history",\
    "policyname": "Users can view their own review history",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(user_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "review_history",\
    "policyname": "Users can view their own reviews",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "SELECT",\
    "qual": "(auth.uid() = user_id)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Admins can manage all subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "ALL",\
    "qual": "is_admin(auth.uid())",\
    "with_check": "is_admin(auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Public subjects are viewable by everyone",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(is_public = true)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can create subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(creator_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can delete own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "DELETE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can delete their own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "DELETE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can insert their own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(creator_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can update own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": "(creator_id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can update their own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can view accessible subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "((is_public = true) OR (creator_id = auth.uid()) OR is_admin(auth.uid()))",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "subjects",\
    "policyname": "Users can view their own subjects",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(creator_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_card_progress",\
    "policyname": "Admins can view all progress",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "is_admin(auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_card_progress",\
    "policyname": "Users can delete their own progress",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "DELETE",\
    "qual": "(user_id = auth.uid())",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_card_progress",\
    "policyname": "Users can insert their own progress",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "(auth.uid() = user_id)"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_card_progress",\
    "policyname": "Users can update their own progress",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "UPDATE",\
    "qual": "(auth.uid() = user_id)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_card_progress",\
    "policyname": "Users can view their own progress",\
    "permissive": "PERMISSIVE",\
    "roles": "\{authenticated\}",\
    "cmd": "SELECT",\
    "qual": "(auth.uid() = user_id)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Debug allow all",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "ALL",\
    "qual": "true",\
    "with_check": "true"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Debug allow all profiles",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "ALL",\
    "qual": "true",\
    "with_check": "true"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "System can create user profiles",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "true"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Trigger can create user profiles",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "INSERT",\
    "qual": null,\
    "with_check": "true"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Users can update own profile",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "UPDATE",\
    "qual": "(id = auth.uid())",\
    "with_check": "(id = auth.uid())"\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Users can view own profile",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "(auth.uid() = id)",\
    "with_check": null\
  \},\
  \{\
    "schemaname": "public",\
    "tablename": "user_profiles",\
    "policyname": "Users can view public profiles",\
    "permissive": "PERMISSIVE",\
    "roles": "\{public\}",\
    "cmd": "SELECT",\
    "qual": "((is_public = true) OR (id = auth.uid()) OR is_admin(auth.uid()))",\
    "with_check": null\
  \}\
]}